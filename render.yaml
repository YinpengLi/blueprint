services:
- type: web
  name: chatgpt-kb-agent
  env: python
  plan: starter
  buildCommand: pip install -r backend/requirements.txt
  startCommand: uvicorn app.main:app --host 0.0.0.0 --port 10000
  envVars:
    - key: DATABASE_URL
      fromDatabase:
        name: kb-db
        property: connectionString
    - key: ENCRYPTION_KEY
      sync: false
    - key: ONEDRIVE_CLIENT_ID
      sync: false
    - key: ONEDRIVE_CLIENT_SECRET
      sync: false
    - key: ONEDRIVE_REDIRECT_URL
      sync: false
    - key: KB_ONEDRIVE_ROOT
      value: /ChatGPT-KB
    - key: INGEST_API_KEY
      sync: false
    - key: EMBEDDINGS_PROVIDER
      value: fallback
    - key: OPENAI_API_KEY
      sync: false
databases:
- name: kb-db
  plan: starter
